<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/main.css">
    <script src="js/main.js"></script>
    <title>js lab</title>
</head>

<body>
    <p>
        <script>
            if (localStorage.User != null) {
                let person = JSON.parse(localStorage.User);
                document.write(person.name);
            }
        </script>
        <button onclick="logout()">Logout</button>
    </p>
    <script>

        function logout() {
            if (localStorage.User != null) {
                delete localStorage.User;
                document.location.href = "index.html";
            }
        }

        var products = [];

        //Yuxaridaki funksiyani EcmaScript 6-ya uygunlasdirib yaziriq.
        class Product {
            constructor(name, model, price, color) {
                this._name = name;
                this._model = model;
                this._price = price;
                this._color = color;
            }

            get Name() {
                return this._name;
            }
            set Name(n) {
                this._name = n;
            }

            get Model() {
                return this._model;
            }
            set Model(n) {
                this._model = n;
            }

            get Price() {
                return this._price;
            }
            set Price(n) {
                this._price = n;
            }

            get Color() {
                return this._color;
            }
            set Color(n) {
                this._color = n;
            }
        }

        //bir nece product elave edek.
        let pd1 = new Product("Acer 102", "Acer", 56, "red", );
        let pd2 = new Product("Samsung 503", "Samsung", 156, "black", );
        let pd3 = new Product("HP 444", "HP", 256, "yellow", );
        let pd4 = new Product("DELL 54", "DELL", 65, "green", );

        //bu productlari products arrayine elave edek.


        // for (let key in localStorage) {
        //     console.log(typeof localStorage[key])
        // }

        let newArr = JSON.parse(localStorage.newProducts);



        products.push(pd1, pd2, pd3, pd4);

        for (let item of newArr) {
            products.push(item)
        }

        //bu funksiya obyekti yaradir.
        // function Product(name, model, price, color) {
        //     this.name = name;
        //     this.model = model;
        //     this.price = price;
        //     this.color = color;

        //     return this;
        // }



        //yaratdigimiz products arrayinin brauzerde (DOM modelde) gorunmesi ucun funksiya yaziriq.
        function visualize() {
            for (let k of products) {
                let div = document.createElement("div"); //div yaradiriq
                div.style.border = "2px solid green"
                let pName = document.createElement("p"); //product arrayinin adi ucun p yaradiriq
                pName.innerText = k._name;  //yaradilan p-nin adi products arrayinin adina beraberdir.

                let pModel = document.createElement("p");  //product arrayinin modeli ucun p yaradiriq
                pModel.innerText = k._model; //yaradilan p-nin modeli products arrayinin modeline beraberdir.

                let pPrice = document.createElement("p");  //product arrayinin qiymeti ucun p yaradiriq
                pPrice.innerText = k._price;  //yaradilan p-nin qiymeti products arrayinin qiymetine beraberdir.

                let pColor = document.createElement("p");  //product arrayinin rengi ucun p yaradiriq
                pColor.style.padding = "20px";  
                pColor.style.width = "20px";  
                pColor.style.background   = k._color; //yaradilan p-nin rengi products arrayinin rengine beraberdir.

                //yaradilan p-leri div-in icine salaq.
                div.appendChild(pName);
                div.appendChild(pModel);
                div.appendChild(pPrice);
                div.appendChild(pColor);

                document.body.appendChild(div);
            }
        }

        if (localStorage.User != null) {
            //visualize funksiyasini cagiraqki yazdigimiz gorunsun.
            visualize();
        } else {
            location.href = "index.html";
        }

    </script>

</body>

</html>